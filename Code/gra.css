/* Header styles for gra.html */
header {
  background-color: darkslateblue;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  padding: 20px 10px 0 10px;
  width: 100%;
  box-sizing: border-box;
}

header .logo {
  width: 120px;
  height: auto;
  display: block;
}

header h1 {
  margin: 0;
  font-size: 36px;
  text-align: center;
}

main {
  margin-top: 0;
  width: 100%;
  display: block;
}

.button img {
  display: block;
  width: 200px;
  height: auto;
}

/* Toolbar / tabs */
.toolbar {
  display: flex;
  gap: 8px;
  padding: 10px;
  background: #2f2f4f;
  justify-content: center;
  flex-wrap: wrap;
}
.toolbar .tab {
  background: #4b4b78;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
}
.toolbar .tab.active {
  background: #6f6fb0;
}

/* Panels */
#panels {
  padding: 16px;
  width: 100%;
  box-sizing: border-box;
}
.panel { display: none; }
.panel.active { display: block; }
.panel h2 { margin-top: 0; }
.panel .panel-body { background: #f4f4f8; padding: 12px; border-radius: 6px; }

.map-placeholder { height: 300px; background: #ddd; display:flex; align-items:center; justify-content:center; color:#666; border-radius:6px; }

.dice-controls { display:flex; gap:8px; align-items:center; margin-bottom:10px; }
.dice-result { min-height: 40px; padding:8px; background:#fff; border-radius:4px; }

/* Character sheet layout */
.char-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 8px;
  margin-bottom: 12px;
}
.char-grid .field label { display: block; font-weight:600; }
.char-grid input { width: 100%; padding:6px; box-sizing: border-box; }

.attacks { margin-bottom: 12px; }
.attack-row { display:flex; gap:8px; margin-bottom:6px; }
.attack-row input { flex:1; padding:6px; }

.skills textarea { width:100%; padding:8px; box-sizing: border-box; }
.experience input { width:200px; padding:6px; }
.form-actions { margin-top:10px; display:flex; gap:8px; }

/* Two-column layout for character sheet */
.char-columns { display:flex; gap:20px; }
.left-col { flex:1; }
.right-col { flex:1; }
.attacks .attack-row { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
.attacks .attack-row input, .attacks .attack-row select { padding:6px; }
.attacks .attack-row .mod-select { width:120px; }

/* charSheet read-only stats */
.card-top { display:flex; flex-direction:column; gap:6px; margin-bottom:12px; }
.char-meta { font-size:14px; color:#333; display:flex; gap:12px; flex-wrap:wrap; }
.stat-list { display:flex; flex-direction:column; gap:6px; }
.stat-row { display:flex; gap:8px; align-items:center; }
.stat-label { width:120px; font-weight:700; }
.stat-val { width:40px; text-align:center; }
.stat-mod { color:#666; }
.skills #skillsDisplay { background:#fff; padding:8px; border-radius:4px; min-height:60px; }

.stat-edit-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(120px,1fr)); gap:8px; margin-bottom:12px; }
.meta-edit { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:8px; margin-bottom:12px; }

/* grouped stats layout */
.stats-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; align-items:start; }
.card-section { background:#fff; padding:10px; border-radius:6px; box-shadow:0 1px 2px rgba(0,0,0,0.05); }
.card-section h4 { margin-top:0; margin-bottom:8px; }
.combat-edit .field.small { display:inline-block; width:48%; }

.skills-section { margin-top:12px; }
.skills-container { display:flex; flex-direction:column; gap:8px; }
.skill-entry { display:flex; gap:8px; align-items:flex-start; background:#f9f9fb; padding:8px; border-radius:6px; }
.skill-entry .col { display:flex; flex-direction:column; gap:6px; }
.skill-entry input, .skill-entry textarea, .skill-entry select { padding:6px; }
.skill-entry textarea { min-width:200px; max-width:100%; }
.skill-entry .remove-skill { align-self:flex-start; margin-left:8px; }

@media(max-width:900px){ .stats-grid { grid-template-columns: 1fr; } }

/* Inventory */
.inventory-container { display:flex; flex-direction:column; gap:8px; }
.inventory-entry { display:flex; gap:8px; align-items:flex-start; background:#f9f9fb; padding:8px; border-radius:6px; }
.inventory-entry input, .inventory-entry textarea { padding:6px; }
.inventory-entry .remove-item { margin-left:8px; }

/* Library */
.library-list { display:flex; flex-direction:column; gap:8px; }
.library-item { display:flex; gap:8px; align-items:center; background:#fff; padding:8px; border-radius:6px; border:1px solid #e6e6ea; }
.library-item .thumb { width:80px; height:60px; object-fit:cover; background:#eee; border-radius:4px; }
.library-item .meta { flex:1; }

/* Battle map */
.battle-map { position:relative; width:100%; height:500px; background:#222; border-radius:6px; overflow:hidden; display:flex; align-items:center; justify-content:center; }
.battle-map.grid-on { background-image: linear-gradient(to right, rgba(255,255,255,0.06) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.06) 1px, transparent 1px); background-size: 48px 48px; }
.token-layer { position:absolute; left:0; top:0; right:0; bottom:0; pointer-events:auto; }
.token { position:absolute; width:48px; height:48px; border-radius:50%; overflow:hidden; background:rgba(255,255,255,0.9); color:#000; display:flex; align-items:center; justify-content:center; font-weight:700; cursor:grab; pointer-events:auto; box-shadow:0 2px 6px rgba(0,0,0,0.4); touch-action:none; user-select:none; }
.token .label { position:absolute; top:100%; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.7); color:#fff; padding:2px 6px; border-radius:4px; font-size:12px; margin-top:8px; }

/* token controls shown on hover */
.token .controls { position:absolute; right:4px; top:4px; display:none; gap:4px; z-index:30; pointer-events:auto; }
.token .controls button { background:rgba(255,255,255,0.85); border:none; padding:2px 4px; font-size:11px; border-radius:4px; cursor:pointer; }
.token .controls button:hover { filter:brightness(0.95); }
.token .img-overlay { position:absolute; left:0; top:0; right:0; bottom:0; background-size:cover; background-position:center; border-radius:50%; }
.token .initials { position:relative; z-index:5; }
.token:hover .controls { display:flex; }
.map-embed { position:absolute; left:0; top:0; right:0; bottom:0; z-index:10; }

/* ensure token layer sits above embedded map content so tokens receive pointer events */
.token-layer { z-index: 20; }

@media(max-width:900px){ .battle-map { height:320px; } }
